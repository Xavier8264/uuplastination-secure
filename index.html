<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UU Plastination ‚Äî Secure Dashboard</title>
  <meta name="description" content="Private, authenticated dashboard for UU Plastination team." />
  <link rel="stylesheet" href="/assets/styles/design-tokens.css" />
  <link rel="stylesheet" href="/assets/styles/dashboard.css" />
</head>
<body>
  <header class="header-bar" role="banner">
    <div class="header-bar-left">
      <h1 class="header-title">UU Plastination</h1>
      <span class="header-subtitle">Secure Dashboard</span>
    </div>
    <div class="header-bar-center"></div>
    <div class="header-bar-right">
      <button type="button" id="recording-control" class="recording-control" aria-label="Toggle recording">
        <div class="recording-dot-hollow" id="recording-dot"></div>
        <span id="recording-text">Record</span>
      </button>
      <button type="button" id="theme-toggle" class="btn btn-small" aria-label="Toggle theme" title="Toggle light/dark mode (t)">
        <span aria-hidden="true">üåô</span>
      </button>
    </div>
  </header>

  <main class="dashboard-container" role="main">
    <div class="dashboard-layout">
      <div class="column-stack primary-column">
        <section class="card" role="region" aria-labelledby="valve-title">
          <div class="card-header">
            <h2 class="card-title" id="valve-title"><span aria-hidden="true">ü¶æ</span> Valve Control</h2>
            <span class="text-mono" id="valve-status-text">Ready</span>
          </div>
          <div class="card-body">
            <div class="slider-control">
              <div class="slider-meta">
                <span class="text-muted">Position</span>
                <span class="slider-value text-mono"><span id="stepper-slider-value">50</span>%</span>
              </div>
              <div class="slider-track">
                <div class="slider-fill" id="valve-position-fill" style="width: 50%;"></div>
                <input type="range" id="stepper-slider" class="slider-input" min="0" max="100" value="50" aria-label="Valve position" />
              </div>
              <div class="slider-labels text-muted">
                <span>Closed</span>
                <span>Open</span>
              </div>
            </div>
            <div class="position-readout text-mono">
              <span>Stepper: <span id="valve-position">50</span>%</span>
              <span>Steps: <span id="stepper-position">0</span></span>
            </div>
            <div class="btn-group">
              <button type="button" id="stepper-enable" class="btn btn-primary"><span aria-hidden="true">‚ñ∂Ô∏è</span> Enable</button>
              <button type="button" id="stepper-disable" class="btn"><span aria-hidden="true">‚è∏Ô∏è</span> Disable</button>
              <button type="button" id="stepper-open" class="btn"><span aria-hidden="true">‚¨ÜÔ∏è</span> Open</button>
              <button type="button" id="stepper-close" class="btn"><span aria-hidden="true">‚¨áÔ∏è</span> Close</button>
              <button type="button" id="stepper-abort" class="btn btn-danger"><span aria-hidden="true">‚õî</span> Abort</button>
            </div>
            <p class="text-muted" id="stepper-message"></p>
          </div>
        </section>

        <section class="card" role="region" aria-labelledby="camera-title">
          <div class="card-header">
            <h2 class="card-title" id="camera-title"><span aria-hidden="true">üìπ</span> Live Camera</h2>
            <div class="camera-meta text-mono">
              <span id="camera-resolution">1280√ó720</span>
              <span>¬∑</span>
              <span id="fps-value">30</span> FPS
            </div>
          </div>
          <div class="card-body">
            <div class="camera-feed" id="camera-widget">
              <img src="/stream.mjpg" alt="Live camera stream" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
              <div class="camera-placeholder" role="status" aria-live="polite">
                <span aria-hidden="true">üì∑</span>
                <p>Camera stream unavailable</p>
              </div>
              <button type="button" id="camera-fullscreen-btn" class="btn btn-small camera-fullscreen">
                <span aria-hidden="true">‚§¢</span>
                <span>Fullscreen</span>
              </button>
            </div>
          </div>
        </section>

        <section class="card" role="region" aria-labelledby="history-title">
          <div class="card-header">
            <h2 class="card-title" id="history-title"><span aria-hidden="true">üìà</span> Bubble Rate History</h2>
            <div class="chart-controls" role="group" aria-label="Chart time range">
              <button type="button" class="chart-chip active" data-range="15m">15m</button>
              <button type="button" class="chart-chip" data-range="1h">1h</button>
              <button type="button" class="chart-chip" data-range="6h">6h</button>
              <button type="button" class="chart-chip" data-range="24h">24h</button>
            </div>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="bubble-chart-canvas"></canvas>
            </div>
          </div>
        </section>
      </div>

      <aside class="column-stack secondary-column" aria-label="System widgets">
        <section class="card" role="region" aria-labelledby="bubble-stats-title">
          <div class="card-header">
            <h2 class="card-title" id="bubble-stats-title"><span aria-hidden="true">ü´ß</span> Bubble Rate</h2>
            <span class="metric-delta up" id="bubble-rate-delta">‚ñ≤ +0.0 vs 5min avg</span>
          </div>
          <div class="card-body bubble-stats">
            <div class="metric">
              <div class="metric-value">
                <span id="bubble-rate-value">72</span>
                <span class="unit">BPM</span>
              </div>
              <p class="text-muted">Current bubble rate</p>
            </div>
            <dl class="metric-breakdown">
              <div class="metric-row">
                <dt>Last minute avg</dt>
                <dd id="bubble-last-minute">-- bpm</dd>
              </div>
              <div class="metric-row">
                <dt>Peak (24h)</dt>
                <dd id="bubble-peak">-- bpm</dd>
              </div>
              <div class="metric-row">
                <dt>Floor (24h)</dt>
                <dd id="bubble-floor">-- bpm</dd>
              </div>
            </dl>
          </div>
        </section>

        <section class="card" role="region" aria-labelledby="pi-stats-title">
          <div class="card-header">
            <h2 class="card-title" id="pi-stats-title"><span aria-hidden="true">üçì</span> Pi Stats</h2>
          </div>
          <div class="card-body pi-stats">
            <div class="pi-stat-row">
              <span>CPU Temp</span>
              <span class="text-mono"><span id="cpu-temp">45.2</span>¬∞C</span>
            </div>
            <div class="pi-stat-row">
              <span>CPU Usage</span>
              <span class="text-mono"><span id="cpu-usage">35.4</span>%</span>
            </div>
            <div class="pi-stat-row">
              <span>Memory</span>
              <span class="text-mono" id="memory-usage">2.1 / 4 GB</span>
            </div>
            <div class="pi-stat-row">
              <span>Uptime</span>
              <span class="text-mono" id="uptime">5d 14h</span>
            </div>
            <div class="pi-stat-row">
              <span>Camera</span>
              <span class="text-mono" id="camera-service">Active</span>
            </div>
            <div class="pi-stat-row">
              <span>Stepper</span>
              <span class="text-mono" id="stepper-service">Active</span>
            </div>
          </div>
        </section>
      </aside>
    </div>
  </main>

  <script src="/assets/js/dashboard.js"></script>
</body>
</html>
